import{Q as b}from"./QAvatar.abc7970b.js";import{c as m,d as a,b as q}from"./QScrollObserver.8917f4b3.js";import{Q as k,a as w}from"./QTooltip.f400ef20.js";import{Q}from"./QCard.43ec9f78.js";import{f as S,Q as N}from"./formatutils.476d2445.js";import{Q as p}from"./QBtn.5221da2d.js";import{_ as E,$ as B,A as O,d as T,m as u,R as f,v as i,s as t,q as e,x as n,a0 as x,a1 as g,t as l,a2 as V,n as A}from"./index.c0e67443.js";import{p as J}from"./apiutil.4137f980.js";import"./QIcon.a78c5dab.js";import"./focus-manager.b4734f87.js";import"./position-engine.d2224b83.js";const R={setup(){const y=B(),c=()=>{y.push("cart")};O(()=>{s();try{o.cart.forEach(r=>{o.sub+=r.item.msrp*r.qty,o.total+=r.item.msrp*1.13*r.qty,o.tax+=r.item.msrp*.13*r.qty})}catch{console.log("Something went wrong")}});let o=T({status:"",cart:[],sub:0,tax:0,total:0});const s=()=>{try{o.cart=JSON.parse(sessionStorage.getItem("cart"))}catch{console.log(err),o.status=`Error has occured: ${err.message}`}},_=()=>{sessionStorage.removeItem("cart"),o.cart=[],o.status="cart cleared"};return{loadCart:s,viewCart:c,clearCart:_,saveCart:async()=>{let r=JSON.parse(sessionStorage.getItem("customer")),C=JSON.parse(sessionStorage.getItem("cart"));try{o.status="sending cart info to server";let d={email:r.email,selections:C};console.log(d);let h=await J("order",d);h.indexOf("not")>0||_(),o.status=h}catch(d){console.log("Error: "+d),o.status=`Error add cart: ${d}`}},formatCurrency:S,state:o}}},H={class:"text-center"},L=i("div",{class:"text-h4 q-mt-md text-primary"},"Cart Contents",-1),M=["src"],P={class:"text-h6 text-primary"},z={key:0},D={key:0,style:{position:"fixed","margin-left":"65px",padding:"0"}},F={class:"text-center"};function I(y,c,o,s,_,v){return u(),f(g,null,[i("div",H,[L,t(b,{class:"q-mt-md",size:"xl",square:""},{default:e(()=>[i("img",{src:"img/cart.png"},null,8,M)]),_:1}),i("div",P,n(s.state.status),1)]),s.state.cart!=null?(u(),f("div",z,[t(N,{style:{height:"55vh"}},{default:e(()=>[t(Q,{class:"q-ma-md"},{default:e(()=>[i("b",null,[t(m,{style:{bottom:"-2vh"}},{default:e(()=>[t(a,{class:"q-ml-sm text-h8 text-dark"},{default:e(()=>[l("Name")]),_:1}),t(a,{class:"q-ml-sm text-h8 text-dark"},{default:e(()=>[l("Qty")]),_:1}),t(a,{class:"q-ml-sm text-h8 text-dark"},{default:e(()=>[l("MSRP")]),_:1}),t(a,{class:"q-ml-sm text-h8 text-dark"},{default:e(()=>[l("Extended")]),_:1})]),_:1})]),t(q,{separator:""},{default:e(()=>[(u(!0),f(g,null,V(s.state.cart,r=>(u(),A(m,{clickable:"",key:r.id},{default:e(()=>[t(a,null,{default:e(()=>[l(n(r.item.productName),1)]),_:2},1024),t(a,null,{default:e(()=>[l(n(r.qty),1)]),_:2},1024),t(a,null,{default:e(()=>[l(n(s.formatCurrency(r.item.msrp)),1)]),_:2},1024),t(a,null,{default:e(()=>[l(n(s.formatCurrency(r.qty*r.item.msrp))+" ",1),r.qty>r.item.qtyOnHand?(u(),f("div",D,[t(k,{color:"red","text-color":"white","text-center":""},{default:e(()=>[l("! "),t(w,{"transition-show":"flip-right","transition-hide":"flip-left","text-color":"white"},{default:e(()=>[l("The quantity exceeds the stock. Some of the products will be backordered. ")]),_:1})]),_:1})])):x("",!0)]),_:2},1024)]),_:2},1024))),128)),t(m,null,{default:e(()=>[t(a),t(a),t(a,{style:{"font-weight":"bold"}},{default:e(()=>[l("Sub: ")]),_:1}),t(a,null,{default:e(()=>[l(n(s.formatCurrency(s.state.sub)),1)]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(a),t(a),t(a,{style:{"font-weight":"bold"}},{default:e(()=>[l("Tax(13%): ")]),_:1}),t(a,null,{default:e(()=>[l(n(s.formatCurrency(s.state.tax)),1)]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(a),t(a),t(a,{style:{"font-weight":"bold"}},{default:e(()=>[l("Total: ")]),_:1}),t(a,null,{default:e(()=>[l(n(s.formatCurrency(s.state.total)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i("div",F,[t(p,{icon:"shopping_cart",class:"q-mr-sm",color:"primary",label:"Save",disable:s.state.cart.length<1,onClick:c[0]||(c[0]=r=>s.saveCart())},null,8,["disable"]),t(p,{icon:"refresh",color:"primary",label:"Clear",disable:s.state.qty<0,onClick:c[1]||(c[1]=r=>s.clearCart()),style:{"max-width":"25vw","margin-left":"3vw"}},null,8,["disable"])])])):x("",!0)],64)}var at=E(R,[["render",I]]);export{at as default};
