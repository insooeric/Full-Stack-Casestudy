import{Q as w}from"./QAvatar.abc7970b.js";import{Q as g}from"./QInput.8db7ff8c.js";import{Q as _}from"./QBtn.5221da2d.js";import{_ as B,d as x,r as y,m as C,R as N,s as i,q as k,v as a,u as $,a9 as L}from"./index.c0e67443.js";import{f as M}from"./apiutil.4137f980.js";import"./QIcon.a78c5dab.js";import"./focus-manager.b4734f87.js";const Q={setup(){let s=x({status:"",address:"",showmap:!1});const o=async()=>{try{s.showmap=!0;const e=window.tt;let d=`https://api.tomtom.com/search/2/geocode/${s.address}.json?key=fNgpLsHUG2B7Iiw0ZNJNdyaMCDuUamX2`,r=await(await fetch(d)).json(),c=r.results[0].position.lat,p=r.results[0].position.lon,n=e.map({key:"fNgpLsHUG2B7Iiw0ZNJNdyaMCDuUamX2",container:l.value,source:"vector/1/basic-main",center:[p,c],zoom:8});n.addControl(new e.FullscreenControl),n.addControl(new e.NavigationControl);let m=await M(`Branch/${c}/${p}`);m.forEach(t=>{console.log(t.street)}),m.forEach(t=>{let h=new e.Marker().setLngLat([t.longitude,t.latitude]).addTo(n),v=25,u=new e.Popup({offset:v});u.setHTML(`<div class="text-left"><div id="popup">Branch#: ${t.id}</div><div>${t.street}, ${t.city}<br/>${(t.distance*.621371).toFixed(2)} km</div></div>`),h.setPopup(u)})}catch(e){s.status=e.message}},l=y(null);return{state:s,mapRef:l,genMap:o}}},q={class:"text-center"},U=["src"],V=a("div",{class:"text-h6"},"Find 3 Closest Branches To:",-1),D=a("br",null,null,-1),F={style:{height:"50vh",width:"90vw","margin-left":"5vw","margin-top":"2vh",border:"solid"},ref:"mapRef"};function I(s,o,l,e,d,f){return C(),N("div",q,[i(w,{class:"q-mt-md",size:"xl",square:""},{default:k(()=>[a("img",{src:"img/cart.png"},null,8,U)]),_:1}),V,a("div",null,[i(g,{class:"q-ma-lg text-h5",placeholder:"enter current address",id:"address",modelValue:e.state.address,"onUpdate:modelValue":o[0]||(o[0]=r=>e.state.address=r)},null,8,["modelValue"]),D,i(_,{label:"FIND 3",onClick:e.genMap,class:"q-mb-md",style:{width:"30vw"}},null,8,["onClick"])]),$(a("div",F,null,512),[[L,e.state.showmap===!0]])])}var G=B(Q,[["render",I]]);export{G as default};
