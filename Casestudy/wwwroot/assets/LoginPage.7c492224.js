import{Q as d}from"./QInput.8db7ff8c.js";import{Q as n}from"./QBtn.5221da2d.js";import{Q as g}from"./QForm.559cebaf.js";import{Q as x}from"./QCard.43ec9f78.js";import{p as m}from"./apiutil.4137f980.js";import{_ as q,d as w,$ as y,a8 as _,m as v,R as V,v as p,x as R,s as a,q as u,a1 as h}from"./index.c0e67443.js";import"./QIcon.a78c5dab.js";import"./focus-manager.b4734f87.js";const Q={setup(){let t=w({status:"",email:"",password:""});const s=r=>!!r||"field is required",i=y(),e=_();return{state:t,login:async()=>{t.status="login to server";let r={email:t.email,password:t.password};try{let l=await m("customer/login",r);l.token.includes("invalid")?t.status="email or passwrod invalid - login failed":(sessionStorage.setItem("customer",JSON.stringify(l)),t.status="login successful",e.query.nextUrl?i.push({path:e.query.nextUrl}):i.push({path:"/"}))}catch{t.status="email or passwrod invalid - login failed"}},isRequired:s,resetFields:()=>{t.status="",t.email="",t.password=""},isValidEmail:r=>/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/.test(r)||"Invalid email",poster:m}}},b=p("div",{class:"text-h4 text-center q-mt-md q-mb-md text-primary"},"Login",-1),E={class:"text-title2 text-center text-negative text-bold q-mt-sm"};function F(t,s,i,e,c,f){return v(),V(h,null,[b,p("div",E,R(e.state.status),1),a(x,{class:"q-ma-md q-pa-md"},{default:u(()=>[a(g,{ref:"myForm",class:"q-gutter-md",greedy:"",onSubmit:e.login,onReset:e.resetFields},{default:u(()=>[a(d,{outlined:"",placeholder:"enter email address",id:"email",modelValue:e.state.email,"onUpdate:modelValue":s[0]||(s[0]=o=>e.state.email=o),rules:[e.isRequired,e.isValidEmail]},null,8,["modelValue","rules"]),a(d,{outlined:"",placeholder:"enter password",id:"password",modelValue:e.state.password,"onUpdate:modelValue":s[1]||(s[1]=o=>e.state.password=o),rules:[e.isRequired],type:"password"},null,8,["modelValue","rules"]),a(n,{label:"LOGIN",type:"submit"}),a(n,{label:"RESET",type:"reset"})]),_:1},8,["onSubmit","onReset"])]),_:1})],64)}var k=q(Q,[["render",F]]);export{k as default};
